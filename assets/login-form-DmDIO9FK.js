import{D as y}from"./load-indicator-DoDZD9oB.js";import{_ as C,p as I,f as i,D as R,r as o,c as f,o as u,a as e,b as c,w as a,d as E,e as b,l as q,g as M,h as S,u as T,j as V,i as N,k as A,n as F}from"./index-B4I5mIwG.js";const L={setup(){const x=S(),n=T(),d=V({email:"",password:""}),t=N(!1);function _(){n.push("/create-account")}async function p(){const{email:r,password:l}=d;t.value=!0;const s=await A.logIn(r,l);s.isOk?n.push(x.query.redirect||"/home"):(t.value=!1,F(s.message,"error",2e3))}return{formData:d,loading:t,onCreateAccountClick:_,onSubmit:p}},components:{DxLoadIndicator:y,DxForm:R,DxEmailRule:i.DxEmailRule,DxRequiredRule:i.DxRequiredRule,DxItem:i.DxItem,DxLabel:i.DxLabel,DxButtonItem:i.DxButtonItem,DxButtonOptions:i.DxButtonOptions,DxButton:I.DxButton}},O={class:"dx-button-text"},P={key:1},j={class:"link"};function z(x,n,d,t,_,p){const r=o("dx-required-rule"),l=o("dx-email-rule"),s=o("dx-label"),m=o("dx-item"),g=o("dx-button-options"),D=o("dx-button-item"),h=o("dx-load-indicator"),k=o("dx-form"),w=o("router-link"),v=o("dx-button");return u(),f("form",{class:"login-form",onSubmit:n[0]||(n[0]=M((...B)=>t.onSubmit&&t.onSubmit(...B),["prevent"]))},[e(k,{"form-data":t.formData,disabled:t.loading},{signInTemplate:a(()=>[c("div",null,[c("span",O,[t.loading?(u(),E(h,{key:0,width:"24px",height:"24px",visible:!0})):b("",!0),t.loading?b("",!0):(u(),f("span",P,"Sign In"))])])]),default:a(()=>[e(m,{"data-field":"email","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Email",mode:"email"}},{default:a(()=>[e(r,{message:"Email is required"}),e(l,{message:"Email is invalid"}),e(s,{visible:!1})]),_:1}),e(m,{"data-field":"password","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Password",mode:"password"}},{default:a(()=>[e(r,{message:"Password is required"}),e(s,{visible:!1})]),_:1}),e(m,{"data-field":"rememberMe","editor-type":"dxCheckBox","editor-options":{text:"Remember me",elementAttr:{class:"form-text"}}},{default:a(()=>[e(s,{visible:!1})]),_:1}),e(D,null,{default:a(()=>[e(g,{width:"100%",type:"default",template:"signInTemplate","use-submit-behavior":!0})]),_:1})]),_:1},8,["form-data","disabled"]),c("div",j,[e(w,{to:"/reset-password"},{default:a(()=>n[1]||(n[1]=[q("Forgot password?")])),_:1,__:[1]})]),e(v,{text:"Create an account",stylingMode:"outlined",width:"100%",onClick:t.onCreateAccountClick},null,8,["onClick"])],32)}const J=C(L,[["render",z]]);export{J as default};
