import{_ as y,f as a,D as B,r as t,c as _,o as u,a as e,w as r,b as f,d as k,e as p,g as C,u as R,h as I,i as w,j as q,k as S,n as L}from"./index-DjPYO_9U.js";import{D as M}from"./load-indicator-C5dVIsTW.js";const N={components:{DxForm:B,DxItem:a.DxItem,DxLabel:a.DxLabel,DxButtonItem:a.DxButtonItem,DxButtonOptions:a.DxButtonOptions,DxRequiredRule:a.DxRequiredRule,DxCustomRule:a.DxCustomRule,DxLoadIndicator:M},setup(){const m=R(),d=I(),c=w(""),o=w(!1),i=q({password:""});c.value=d.params.recoveryCode;async function x(){const{password:s}=i;o.value=!0;const n=await S.changePassword(s,c.value);o.value=!1,n.isOk?m.push("/login-form"):L(n.message,"error",2e3)}function l(s){return s.value===i.password}return{loading:o,formData:i,onSubmit:x,confirmPassword:l}}},O={class:"dx-button-text"},V={key:1};function E(m,d,c,o,i,x){const l=t("dx-required-rule"),s=t("dx-label"),n=t("dx-item"),b=t("dx-custom-rule"),h=t("dx-button-options"),D=t("dx-button-item"),g=t("dx-loadIndicator"),v=t("dx-form");return u(),_("form",{onSubmit:d[0]||(d[0]=C((...P)=>o.onSubmit&&o.onSubmit(...P),["prevent"]))},[e(v,{"form-data":o.formData,disabled:o.loading},{changePassword:r(()=>[f("div",null,[f("span",O,[o.loading?(u(),k(g,{key:0,width:"24px",height:"24px",visible:!0})):p("",!0),o.loading?p("",!0):(u(),_("span",V,"Continue"))])])]),default:r(()=>[e(n,{"data-field":"password","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Password",mode:"password"}},{default:r(()=>[e(l,{message:"Password is required"}),e(s,{visible:!1})]),_:1}),e(n,{"data-field":"confirmedPassword","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Confirm Password",mode:"password"}},{default:r(()=>[e(l,{message:"Password is required"}),e(b,{message:"Passwords do not match","validation-callback":o.confirmPassword},null,8,["validation-callback"]),e(s,{visible:!1})]),_:1}),e(D,null,{default:r(()=>[e(h,{width:"100%",type:"default",template:"changePassword","use-submit-behavior":!0})]),_:1})]),_:1},8,["form-data","disabled"])],32)}const j=y(N,[["render",E]]);export{j as default};
